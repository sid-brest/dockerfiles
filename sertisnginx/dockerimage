# Use the nginx base image
FROM nginx

# Set the working directory to nginx html directory
WORKDIR /usr/share/nginx/html

# Install git
RUN apt-get update && apt-get install -y git nano python

# Clone the repository into nginx html directory
RUN git clone https://github.com/sid-brest/sertis.by.git

COPY replecerow.py /usr/share/nginx/html/

RUN mv -f /usr/share/nginx/html/replecerow.py /usr/share/nginx/html/sertis.by

RUN python3 /usr/share/nginx/html/sertis.by/replecerow.py

# Expose port 80
EXPOSE 80

# Start nginx
CMD ["nginx", "-g", "daemon off;"]